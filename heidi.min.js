"use strict";if(typeof $==="undefined"||typeof jQuery==="undefined"){console.error("Please embed jQuery before using the library Heidi.")}var heidi={deleteHiddenFields:false,hideOrShow:function(sel){var fieldnames={},toShow={},toHide={},toReplace={},toDelete=[];$(sel).each(function(i,el){var $el=$(el),fieldname,show=false,clean=true;if(!$el.attr("data-select"))return;if($el[0].tagName==="OPTION"){fieldname=$el.closest("select")[0].name;if($el[0].selected)show=true}else if($el[0].tagName==="BUTTON"){if($el.closest("[data-value]").attr("data-value")==$el.attr("data-select")){show=true;$el.addClass("button_active")}else{clean=false;$el.removeClass("button_active")}}else if($el[0].tagName==="INPUT"){fieldname=$el[0].name.replace(/([\[\]])/g,"\\$1");if($el[0].type=="radio"||$el[0].type=="checkbox"){if($el[0].checked)show=true}else if($el[0].type=="number"){if(isNaN($el[0].valueAsNumber)){if($el[0].value)show=true}else{if($el[0].valueAsNumber>0)show=true}}else{if($el[0].value)show=true}}else if($el[0].tagName==="TEXTAREA"){if($el[0].value)show=true}fieldnames[fieldname]=true;var selected=$el.attr("data-select").split(/,\s*/);var v=$el.attr("data-variation");if(v)v=parseInt(v);selected.forEach(function(sel){var x=sel.replace(/^!/,"");if(x===sel){if(show)toShow[x]=[1,v];else toHide[x]=[1,v,clean]}else{if(show)toHide[x]=[2,v,clean];else toShow[x]=[1,v]}})});for(var el in toHide){if(toShow[el]){if(toHide[el][0]>toShow[el][0])delete toShow[el];else delete toHide[el]}}$(Object.keys(toShow).join(", ")).removeClass("hidden");$(Object.keys(toHide).join(", ")).addClass("hidden");if(this.deleteHiddenFields){for(var sel in toHide)if(toHide[sel][2])toDelete.push(sel);toDelete.forEach(function(el){var $el=$(el);if($el.is(":visible"))return;$el.find('input[type="text"], input[type="number"], textarea, select').andSelf().val("");$el.find('input[type="radio"]:checked, input[type="checkbox"]:checked').andSelf().each(function(i,el){el.checked=false})})}$('[href^="#"]').each(function(i,el){var $el=$(el);if($($el.attr("href")).is(":hidden"))$el.addClass("greyText");else $el.removeClass("greyText")});$("button[data-select]").each(function(i,el){var $el=$(el);if($($el.attr("data-select")).is(":hidden"))$el.addClass("greyText");else $el.removeClass("greyText")});return Object.keys(fieldnames)}};$().ready(function(){var fieldnames=heidi.hideOrShow("[data-select]");if(fieldnames.length){$("[name="+fieldnames.join("], [name=")+"]").change(function(){heidi.hideOrShow("[data-select]")})}$("button[data-select]").click(function(e){e.preventDefault();var $el=$(e.target),attrVal=$el.attr("data-select");$el.closest("[data-value]").attr("data-value",attrVal);heidi.hideOrShow("[data-select]")})});